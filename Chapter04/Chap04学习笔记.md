### 《Python图像处理实战》Chapter04

图像增强：目的是提高图像质量或是特定的特征显得更加突出，主要包含以下几个方面的技术类型：

- 逐点强度变换
  - 对数变换
  - 幂律变换
  - 对比度拉伸
  - 二值化
    - 固定阈值二值化
    - 半色调二值化
    - 基于误差扩散的Floyd-Steinberg抖动
- 直方图处理
  - 直方图均衡化
  - 直方图匹配
- 线性噪声平滑
  - PIL平滑
    - 基于ImageFilter平滑
    - 基于核模糊均值化平滑
    - 基于高斯模糊滤波器平滑
  - 基于SciPy ndimage进行盒核与高斯核平滑比较
- 非线性噪声平滑
  - PIL平滑
    - 中值滤波器
    - 最大值滤波器和最小值滤波器
  - Scikit-image平滑(去噪)
    - 双边滤波器
    - 非局部均值滤波器
  - SciPy ndimage平滑

#### 逐点像素变换

逐点强度变换运算是对输入图像的每个像素$f(x,y)$应用传递函数$T$，将其变换为输出图像中对应的点$g(x,y)=T[f(x,y)]$或等同于$s=T(r)$。这种操作一般是五内存操作即在一点处的输出像素的强度取决于输入像素，相同强度的像素得到相同的变换，不会带来新的信息也不会导致信息丢失，但可以改善视觉外观或者时期特征更加容易被检测。

##### 对数变换

当需要在图像中压缩或拉伸至一定灰度范围时，对数变换可以实现。对数变换的点变换的一般形式为：
$$
s=T(r)=c*log(r+1)
$$

##### 幂律变换

对灰度图像进行点变换，具体如下：
$$
s=T(r)=c*r^\gamma
$$

##### 对比度拉伸

对比度拉伸的目的：以低对比度图像作为输入，将强度值的较窄范围拉伸到所需的较宽范围，以输出高对比度的输出图像，从而增强图像的对比度。具体操作方面，在拉伸实施前，必须指定上下像素值的极限值（在图像上进行归一化），一般情况下，为了使输出图像遍及整个可用像素值范围，通常会将极限值设置为0和255。关键点在于，在原始图像的累积分布函数（CDF）中找到一个合适的值$m$，将灰度级低于$m$的像素变暗（向下限拉伸）和灰度级高于$m$的像素变亮（向上限拉伸），从而产生更高的对比度。

对比度拉伸，改变的是CDF函数中分布较为集中的区域，将其转换为分布相对离散的区域，如下图：

拉伸前：

<img src="C:/Users/WH/AppData/Roaming/Typora/typora-user-images/image-20221026204621327.png" alt="image-20221026204621327" style="zoom: 33%;" />

拉伸后：

<img src="https://gitee.com/sirwenhao/typora-illustration/raw/master/image-20221026204721227.png" alt="image-20221026204721227" style="zoom:33%;" />

#### 二值化

##### 固定阈值二值化

像素点操作，通过将阈值以下的像素点设置为0，将阈值以上的像素点值变为1，从灰度级的图像创建二值图像

##### 半色调二值化

是一种减少伪轮廓的方法，通过在对图像量化前对输入图像添加均匀分布的白噪声实现。具体做法是，对于灰度图像的每个像素$f(x,y)$，添加一个独立的均匀分布于$[-128, 128]$的随机数，实现二值化处理，这种技术称为半色调二值化

#### 直方图处理

直方图处理技术未改变图像中的像素值的动态范围提供了一种好的方法，使其强度直方图具有理想的形状。直方图处理技术可以通过使用非线性（和非单调）传递函数将输入像素的强度映射到输出像素的强度。

##### 直方图均衡化

直方图均衡化采用单调的非线性映射，该映射重新分配输入图像的像素强度值，是输出图像的强度分布均匀（直方图平坦），从而增强图像的对比度

##### 直方图匹配

直方图匹配时之一幅图像的直方图于另一个参考(模板)图像的直方图相匹配的过程，直方图的匹配过程如下：

1. 首先计算每个图像的累计直方图，如下图所示
2. 已知输入图像(将要调整的)中的任意像素值$x_i$，在输入图像中通过匹配输入图像的直方图与模板图像的直方图找到对应的像素值$x_j$
3. 已知$x_i$的像素值的累计直方图$G(x_i)$，找到了一个像素值$x_j$，使其累积分布值$H(x_j)$在参照图中等于$G(x_i)$，即$H(x_j)=G(x_i)$
4. 输入值$x_i$由$x_j$代替

#### 线性噪声平滑

线性（空间）滤波具有对（在邻域内）像素值加权求和的功能，是一种线性运算，可以用来对图像进行模糊或去噪。模糊一般可以用于预处理过程，去除不相关的细节信息，常用的线性滤波器有盒式滤波器和高斯滤波器

- 盒式滤波器：也称均值滤波器，用其邻域的均值替换每个像素，实现平滑效果
- 高斯滤波器：采用核窗口内像素的加权平均值来平滑一个像素（相邻像素的权重随着相邻像素与像素的距离呈指数衰减）

#### 非线性噪声平滑

非线性噪声平滑同样是作用于邻域，其过程也类似于线性滤波器在图像上滑动核（掩模）来实现，但其过滤操作是基于有条件的使用邻域内像素的值实现的，并且不会使用一般形式的乘积和的系数

- 中值滤波器：用邻域像素值的中值替换每个像素，可以极好的去除椒盐噪声（脉冲噪声），中值滤波器在使用时要先给邻域强度一个优先级，然后选择中间值。中值滤波器的优点是：对于统计异常值具有较强的平复性，适应性强，模糊程度低，易于实现
- 最大值滤波器和最小值滤波器
- 双边滤波器：一种边缘识别的平滑滤波器，其中心像素被设置为它的某些邻域像素值的加权平均值，这些邻域像素值的亮度与中心像素的大致相似
- 非局部均值滤波器：是一种保留纹理的非线性去噪算法，在该算法中，对于任意给定的像素，仅适用于感兴趣的像素具有相似局部邻域的临近像素的加权平均值来设置它的值