### 《Python图像处理实战》Chapter02

**采样、傅里叶变换与卷积**

#### 图像形成的两个步骤——采样和量化

##### 采样

采样是对图形的空间选择，对图像像素点的选择或拒绝。采样的类别包含：上采样和下采样，但这两种不同的采样类别又包含各自的问题。

对于上采样，上采样之后的新的图像会包含许多新的之前不包含的像素点，但这些像素点的值无法确定，一般通过“猜测”来决定对应像素点的值，在上采样中一般有两种方式：

- 聚合值，即采用当前像素附近的一个像素或者多个像素邻域值的平均值，会导致图像质量下降
- 双线性插值和三次插值，使用双线性或三次插值的像素邻域的内插值，计算相对复杂，图像质量相对较好

双线性插值原理：对二维图像上任一点$P$的插值，其4个邻域点$Q_{11}、Q_{12}、Q_{21}、Q_{22}$的强度值将被结合起来在点$P$处计算插值，具体为：

<img src="https://gitee.com/sirwenhao/typora-illustration/raw/master/1.png" alt="1" style="zoom: 33%;" />
$$
f(x,y)\approx \frac{f(Q_{11})}{(x_2-x_1)(y_2-y_1)}(x_2-x)(y_2-y) \\
+\frac{f(Q_{21})}{(x_2-x_1)(y_2-y)}(x-x_1)(y_2-y) \\
+\frac{f(Q_{12})}{(x_2-x_1)(y_2-y_1)}(x_2-x)(y-y_1) \\
+\frac{f(Q_{22})}{(x_2-x_1)(y_2-y_1)}(x-x_1)(y-y_1)
$$
上述公式的所乘项的理解，如计算$Q_{11}$实际使用的坐标是点$Q_{22}$对应的坐标，按照此结合上图不难写出上述双线性插值公式。

##### 量化

量化主要指数字图像的强度，可以由每个像素使用的比特数来定义。





#### 离散傅里叶变换

针对于图像处理，一般只需要关注二维离散傅里叶变换。其核心思想是：将图像看作二位函数$f(x,y)$，通过二维DFT，将此函数表示为两个维度上正弦和余弦（傅里叶基本函数）的加权和。使用DFT将（空间域/时域）图像中的一组灰度像素值转换为一组（频域）离散的傅里叶系数。反之，频域中的傅里叶系数二维数组可以通过离散傅里叶逆变换（IDFT）变换至空间域，也称这样的变换为利用傅里叶系数重建图像

二维离散傅里叶变换定义（时域到频域）：
$$
F[u,v]=\frac{1}{MN}\sum_{x=0}^{M-1}\sum_{y=0}^{N-1}f[x,y]e^{-2\pi i(\frac{ux}{M}+\frac{vy}{N})}
$$
二维离散傅里叶逆变换（频域到时域）：
$$
f[x,y]=\sum_{u=0}^{M-1}\sum_{v=0}^{N-1}F[u,v]e^{2\pi i(\frac{ux}{M}+\frac{vy}{N})}
$$

#### 卷积

卷积的工作原理：通过将所有相邻像素的加权重相加来确定中心像素的值，从而计算输出图像中的像素的新值。

相关与卷积：相关运算也是一个输入图像与对应卷积核的运算，计算像素邻域值与核的加权组合，通过输入遍历核窗口，生成输出图像。区别在于，卷积在计算加权组合之前会对核进行两次反转（相对于水平轴和垂直轴，其实就是平面旋转180度），具体计算差别：

相关运算：
$$
g(x,y)=f*K=\sum_{u=-h}^{h}\sum_{v=-h}^{h}f(x+u,y+u)K(u,v)
$$
卷积运算：
$$
g(x,y)=f*K=\sum_{u=-h}^{h}\sum_{v=-h}^{h}f(x-u,y-v)K(u,v)
$$
